{
  "version": 8,
  "projection": {
    "type": "globe"
  },
  "zoom": 2,
  "center": [14.2, -16.35],
  "glyphs": "https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",
  "sources": {
    "maplibre": {
      "type": "vector",
      "url": "https://demotiles.maplibre.org/tiles/tiles.json"
    },
    "Esri.WorldImagery": {
      "type": "raster",
      "tiles": [
        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"
      ]
    },
    "openmaptiles": {
      "type": "vector",
      "url": "https://tiles.openfreemap.org/planet"
    },
    "placettes": {
      "type": "geojson",
      "data": {
        "type": "FeatureCollection",
        "features": [
          {
            "id": "1",
            "type": "Feature",
            "properties": { "richness": 16, "dominant_height": 7.416666666666667 },
            "geometry": { "type": "Point", "coordinates": [14.304208, -16.3296615] }
          },
          {
            "id": "2",
            "type": "Feature",
            "properties": { "richness": 15, "dominant_height": 18.0 },
            "geometry": { "type": "Point", "coordinates": [14.224087333333332, -16.348617] }
          },
          {
            "id": "3",
            "type": "Feature",
            "properties": { "richness": 14, "dominant_height": 16.375 },
            "geometry": { "type": "Point", "coordinates": [14.224867333333334, -16.350167333333335] }
          },
          {
            "id": "4",
            "type": "Feature",
            "properties": { "richness": 12, "dominant_height": 12.181818181818182 },
            "geometry": { "type": "Point", "coordinates": [14.30056225, -16.3261955] }
          },
          {
            "id": "5",
            "type": "Feature",
            "properties": { "richness": 8, "dominant_height": 10.666666666666666 },
            "geometry": { "type": "Point", "coordinates": [14.211029333333334, -16.349709333333333] }
          },
          {
            "id": "6",
            "type": "Feature",
            "properties": { "richness": 7, "dominant_height": 8.0 },
            "geometry": { "type": "Point", "coordinates": [14.208482000000002, -16.349846333333332] }
          },
          {
            "id": "7",
            "type": "Feature",
            "properties": { "richness": 14, "dominant_height": 16.625 },
            "geometry": { "type": "Point", "coordinates": [14.206586666666666, -16.367971999999998] }
          },
          {
            "id": "8",
            "type": "Feature",
            "properties": { "richness": 4, "dominant_height": 8.0 },
            "geometry": { "type": "Point", "coordinates": [13.996415, -16.367266] }
          },
          {
            "id": "9",
            "type": "Feature",
            "properties": { "richness": 3, "dominant_height": 11.0 },
            "geometry": { "type": "Point", "coordinates": [14.048034, -16.335574] }
          }
        ]
      }
    }
  },
  "layers": [
    {
      "id": "background",
      "type": "background",
      "paint": { "background-color": "#D8F2FF" },
      "layout": { "visibility": "visible" },
      "maxzoom": 24
    },
    {
      "id": "coastline",
      "type": "line",
      "source": "maplibre",
      "source-layer": "countries",
      "minzoom": 0,
      "maxzoom": 24,
      "paint": {
        "line-blur": 0.5,
        "line-color": "#198EC8",
        "line-width": { "stops": [[0, 2], [6, 6], [14, 9], [22, 18]] }
      },
      "layout": { "line-cap": "round", "line-join": "round", "visibility": "visible" }
    },
    {
      "id": "countries-fill",
      "type": "fill",
      "source": "maplibre",
      "source-layer": "countries",
      "maxzoom": 24,
      "paint": {
        "fill-color": [
          "match", ["get", "ADM0_A3"],
          ["ARM","ATG","AUS","BTN","CAN","COG","CZE","GHA","GIN","HTI","ISL","JOR","KHM","KOR","LVA","MLT","MNE","MOZ","PER","SAH","SGP","SLV","SOM","TJK","TUV","UKR","WSM"], "#D6C7FF",
          ["AZE","BGD","CHL","CMR","CSI","DEU","DJI","GUY","HUN","IOA","JAM","LBN","LBY","LSO","MDG","MKD","MNG","MRT","NIU","NZL","PCN","PYF","SAU","SHN","STP","TTO","UGA","UZB","ZMB"], "#EBCA8A",
          ["AGO","ASM","ATF","BDI","BFA","BGR","BLZ","BRA","CHN","CRI","ESP","HKG","HRV","IDN","IRN","ISR","KNA","LBR","LCA","MAC","MUS","NOR","PLW","POL","PRI","SDN","TUN","UMI","USA","USG","VIR","VUT"], "#C1E599",
          ["ARE","ARG","BHS","CIV","CLP","DMA","ETH","GAB","GRD","HMD","IND","IOT","IRL","IRQ","ITA","KOS","LUX","MEX","NAM","NER","PHL","PRT","RUS","SEN","SUR","TZA","VAT"], "#E7E58F",
          ["AUT","BEL","BHR","BMU","BRB","CYN","DZA","EST","FLK","GMB","GUM","HND","JEY","KGZ","LIE","MAF","MDA","NGA","NRU","SLB","SOL","SRB","SWZ","THA","TUR","VEN","VGB"], "#98DDA1",
          ["AIA","BIH","BLM","BRN","CAF","CHE","COM","CPV","CUB","ECU","ESB","FSM","GAZ","GBR","GEO","KEN","LTU","MAR","MCO","MDV","NFK","NPL","PNG","PRY","QAT","SLE","SPM","SYC","TCA","TKM","TLS","VNM","WEB","WSB","YEM","ZWE"], "#83D5F4",
          ["ABW","ALB","AND","ATC","BOL","COD","CUW","CYM","CYP","EGY","FJI","GGY","IMN","KAB","KAZ","KWT","LAO","MLI","MNP","MSR","MYS","NIC","NLD","PAK","PAN","PRK","ROU","SGS","SVN","SWE","TGO","TWN","VCT","ZAF"], "#B1BBF9",
          ["ATA","GRL"], "#FFFFFF",
          "#EAB38F"
        ]
      },
      "layout": { "visibility": "visible" }
    },
    {
      "id": "countries-boundary",
      "type": "line",
      "source": "maplibre",
      "source-layer": "countries",
      "maxzoom": 24,
      "paint": {
        "line-color": "rgba(255, 255, 255, 1)",
        "line-width": { "stops": [[1, 1], [6, 2], [14, 6], [22, 12]] },
        "line-opacity": { "stops": [[3, 0.5], [6, 1]] }
      },
      "layout": { "line-cap": "round", "line-join": "round", "visibility": "visible" }
    },
    {
      "id": "geolines",
      "type": "line",
      "source": "maplibre",
      "source-layer": "geolines",
      "maxzoom": 24,
      "filter": ["all", ["!=", "name", "International Date Line"]],
      "paint": {
        "line-color": "#1077B0",
        "line-opacity": 1,
        "line-dasharray": [3, 3]
      },
      "layout": { "visibility": "visible" }
    },
    {
      "id": "geolines-label",
      "type": "symbol",
      "source": "maplibre",
      "source-layer": "geolines",
      "minzoom": 1,
      "maxzoom": 24,
      "filter": ["all", ["!=", "name", "International Date Line"]],
      "paint": {
        "text-color": "#1077B0",
        "text-halo-blur": 1,
        "text-halo-color": "rgba(255, 255, 255, 1)",
        "text-halo-width": 1
      },
      "layout": {
        "text-font": ["Open Sans Semibold"],
        "text-size": { "stops": [[2, 12], [6, 16]] },
        "text-field": "{name}",
        "visibility": "visible",
        "symbol-placement": "line"
      }
    },
    {
      "id": "countries-label",
      "type": "symbol",
      "source": "maplibre",
      "source-layer": "centroids",
      "minzoom": 2,
      "maxzoom": 24,
      "paint": {
        "text-color": "rgba(8, 37, 77, 1)",
        "text-halo-blur": { "stops": [[2, 0.2], [6, 0]] },
        "text-halo-color": "rgba(255, 255, 255, 1)",
        "text-halo-width": { "stops": [[2, 1], [6, 1.6]] }
      },
      "layout": {
        "text-font": ["Open Sans Semibold"],
        "text-size": { "stops": [[2, 10], [4, 12], [6, 16]] },
        "text-field": { "stops": [[2, "{ABBREV}"], [4, "{NAME}"]] },
        "visibility": "visible",
        "text-max-width": 10,
        "text-transform": { "stops": [[0, "uppercase"], [2, "none"]] }
      }
    },
    {
      "id": "satellite",
      "type": "raster",
      "source": "Esri.WorldImagery",
      "layout": { "visibility": "none" }
    },
    {
      "id": "villages",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "place",
      "filter": ["all", ["==", ["get", "class"], "village"]]
    },
    {
      "id": "towns",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "place",
      "filter": ["all", ["==", ["get", "class"], "town"]]
    },
    {
      "id": "boundaries",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "boundary",
      "filter": ["all", ["==", ["get", "admin_level"], 2]]
    },
    {
      "id": "placettes",
      "type": "circle",
      "source": "placettes",
      "paint": {
        "circle-color": "#E63946",
        "circle-radius": 6,
        "circle-stroke-color": "#FFFFFF",
        "circle-stroke-width": 2
      },
      "metadata": {
        "popup": {
          "trigger": "click",
          "html": "<h1>Placette {{ cod }}</h1>Richesse: {{ richness }}<br>Hauteur dominante: {{ dominant_height }}<br>Structure du sol: "
        }
      }
    }
  ],
  "metadata": {
    "controls": [
      { "type": "compass", "position": "top-left" },
      { "type": "layer", "position": "top-right" },
      { "type": "scale", "position": "bottom-left" }
    ]
  }
}
